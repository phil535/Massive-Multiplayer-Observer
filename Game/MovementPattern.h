//
// Created by phil on 1/7/17.
//

#ifndef GAME_MOVEMENTPATTERN_H
#define GAME_MOVEMENTPATTERN_H

#include "Types.h"

class Player;

class MovementPattern
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Enumerations
  public:
    enum class Strategy
    {
      IDLE,
      LINEAR,
      HARMONIC,
      CIRCULAR,

      MAX
    };

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor / Deconstructor
  public:
    MovementPattern(std::string name);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Getter / Setter
  public:
    void setStartPosition(Position &start_position){start_position_ = start_position;}
    const std::string &getName(void) const{return name_;};

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Methods
  public:
    virtual Vec2i move(Position &current_position) = 0;

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Member
  protected:
    std::string name_;
    Position start_position_;
};

class IdleMovementPattern : public MovementPattern
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor / Deconstructor
  public:
    IdleMovementPattern(void);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Methods
  public:
    virtual Vec2i move(Position &current_position);
};

class LinearMovementPattern : public MovementPattern
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor / Deconstructor
  public:
    LinearMovementPattern(Direction direction);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Methods
  public:
    virtual Vec2i move(Position &current_position);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Member
  private:
    Direction direction_;
};

class HarmonicMovementPattern : public MovementPattern
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor / Deconstructor
  public:
    HarmonicMovementPattern(Direction direction, size_t amplitude, size_t period);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Methods
  public:
    virtual Vec2i move(Position &current_position);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Member
  private:
    Direction direction_;
    double amplitude_;
    double period_;
    double phi_;
    double t_;
};

class CircularMovementPattern : public MovementPattern
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Enumerations
  private:
    enum RotationDirection
    {
      CW,
      CCW
    };

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Constructor / Deconstructor
  public:
    CircularMovementPattern(void);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Methods
  public:
    virtual Vec2i move(Position &current_position);

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Member
  private:
    int phi_;
    int radius_;
    Position center_;
    RotationDirection rotation_;
    bool centered_;
};

#endif //GAME_MOVEMENTPATTERN_H
